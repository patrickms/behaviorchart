<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Your page title</title>

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>
    <!--
    See http://codepen.io/ashblue/pen/mCtuA for info on editable tables -->
    <script>
        $( document ).ready(
            function()
            {
                var $TABLE = $('.pure-table');
                var $BTN = $('#update-btn');
                $('.table-add').click(function () {
                  var $clone = $TABLE.find('tr.hide').clone(true).removeClass('hide table-line');
                  $TABLE.find('tbody').append($clone);
                });
                
                $('.table-remove').click(function () {
                  $(this).parents('tr').detach();
                });
                $BTN.click(function () {
                      var $rows = $TABLE.find('tr:not(:hidden)');
                      var headers = [];
                      var data = [];
                      
                      // Get the headers (add special header logic here)
                      $($rows.shift()).find('th:not(:empty)').each(function () {
                        headers.push($(this).text().toLowerCase());
                      });
                      
                      // Turn all existing rows into a loopable array
                      $rows.each(function () {
                        var $td = $(this).find('td');
                        var h = {};
                        
                        // Use the headers from earlier to name our hash keys
                        headers.forEach(function (header, i) {
                          h[header] = $td.eq(i).text();   
                        });
                        
                        data.push(h);
                      });
                      
                      // Output the result
                      console.log('data',data);
                });
            });
    </script>
    
    <style>
        .hide{
            display:none;
        }
    </style>
</head>

<body>
    <!--
    Your HTML goes here. Visit purecss.io/layouts/ for some sample HTML code.
    -->
    
<table class="pure-table pure-table-horizontal">
    <thead>
        <tr>
            <th>Start Time</th>
            <th>Title</th>
            <th>Electronics Allowed</th>
            <th>Preconditions met</th>
            <th>&nbsp;</th>
            <th style="font-weight:normal;"><span class="table-add">&#10133;</span></th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td class="starttime" contenteditable="true">6PM</td>
            <td class="activitytitle" contenteditable="true">After Dinner</td>
            <td contenteditable="true"><select class="electronicsallowed">
                <option>Yes</option>
                <option>No</option>
            </select></td>
            <td contenteditable="true"><input class="preconditionsmet" type="checkbox" checked="true"></input></td>
            <td><span class="table-remove">&#10006;</span></td>
            <td></td>
        </tr>
        <tr>
            <td class="starttime" contenteditable="true">8PM</td>
            <td class="activitytitle" contenteditable="true">After Dinner</td>
            <td contenteditable="true"><select class="electronicsallowed">
                <option>Yes</option>
                <option>No</option>
            </select></td>
            <td contenteditable="true"><input class="preconditionsmet" type="checkbox" checked="true" disabled="true"></input></td>
            <td><span class="table-remove">&#10006;</span></td>
            <td></td>
        </tr>
        <tr class="hide">
            <td class="starttime" contenteditable="true">11:59PM</td>
            <td class="activitytitle" contenteditable="true">Bed</td>
            <td contenteditable="true"><select class="electronicsallowed" value="No">
                <option>Yes</option>
                <option>No</option>
            </select></td>
            <td contenteditable="true"><input class="preconditionsmet" type="checkbox"></input></td>
            <td><span class="table-remove">&#10006;</span></td>
            <td></td>
        </tr>
    </tbody>
</table>
<button id="update-btn" class="btn btn-primary">Update Schedule</button> 

</body>
</html>
